<div class="col-md-2">
  <div class="sidebar"></div>
</div>
<div class="col-md-10">
  <div class="content">
    <ul class="breadcrumb">
      <li>管理面板</li>
      <li>节点管理</li>
      <li>属性管理</li>
    </ul>
    <section>
      <div class="page-header">
        <h1>节点所有属性 - <%= @node.name %></h1>
      </div>
      <ul id="ztree" class="ztree">
      </ul>
    </section>
  </div>
</div>
<script type="text/javascript">
var zTreeObj,
setting = {
  async: {
    enable: true,
    url: "/cpanel/nodes/<%= @node.id %>/natures.json",
    dataType: "json",
    type: "get",
    autoParam: ["id"],
    dataFilter: filter
  },
  edit: {
    enable: true,
    drag: {
      prev: true,
      next: true,
      inner: false
    }
  },
  callback: {
    beforeRemove: beforeRemove,
    beforeRename: beforeRename,
    onRemove: onRemove,
    onRename: onRename,
    beforeDrag: beforeDrag,
    beforeDrop: beforeDrop
  },
  view: {
    expandSpeed: "",
    addHoverDom: addHoverDom,
    removeHoverDom: removeHoverDom,
    selectedMulti: false
  }
};

zTreeNodes = [
  {id: "0", name:"<%= @node.name %>", isParent:true, open:false
  }
];

$(document).ready(function(){
  zTreeObj = $.fn.zTree.init($("#ztree"), setting, zTreeNodes);
});
</script>